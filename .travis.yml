language: c

arch:
  - amd64
  - arm64
#  - ppc64le >=gcc-8
  - s390x

compiler: 
  - gcc
  - clang

branches:
  only:
    - master 

script:
# cd src
  - make
  - ./tb64app turbob64c.c

matrix:
  include:
#    - name: Linux arm gcc
#      os: linux
#      arch: arm64
#      compiler: gcc

#    - name: Linux arm clang
#      os: linux
#      arch: arm64
#      compiler: clang

    - name: Linux-ppc64le-gcc-9
      env: CC=gcc-9
      os: linux
      arch: ppc64le
      before_install:
        - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
        - sudo apt-get -y update
        - sudo apt-get -y install gcc-9

#    - name: Linux-aarch64-clang-8
#      env: CC=clang-8
#      os: linux
#      arch: aarch64
#      before_install:
#        - sudo add-apt-repository -y 'deb http://apt.llvm.org/ trusty main'
#        - sudo apt-get -y update
#        - sudo apt-get -y install clang-8

    - name: Windows-MinGW
      arch: amd64 
      os: windows
      script: 
        - mingw32-make
#        - ./tb64app turbob64c.c

    - name: macOS, xcode
      os: osx


